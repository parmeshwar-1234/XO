@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

/* ============================================
   NEUROMORPHIC UI - CSS CUSTOM PROPERTIES
   ============================================ */
:root {
  /* Light mode colors */
  --neu-bg-primary: #e6e9ef;
  --neu-bg-secondary: #e6e9ef;
  --neu-shadow-dark: #b8bcc2;
  --neu-shadow-light: #ffffff;
  --neu-primary: #7c3aed;
  --neu-primary-dark: #6d28d9;
  
  /* Transitions */
  --transition-fast: 150ms;
  --transition-normal: 300ms;
}

.dark {
  --neu-bg-primary: #374151;
  --neu-bg-secondary: #1f2937;
  --neu-shadow-dark: #111827;
  --neu-shadow-light: #4b5563;
}

@layer base {
  :root {
    --background: 0 0% 90%;
    --foreground: 0 0% 20%;

    --card: 0 0% 93%;
    --card-foreground: 0 0% 20%;

    --popover: 0 0% 93%;
    --popover-foreground: 0 0% 20%;

    --primary: 271 91% 55%;
    --primary-foreground: 0 0% 100%;

    --secondary: 0 0% 82%;
    --secondary-foreground: 0 0% 20%;

    --muted: 0 0% 75%;
    --muted-foreground: 0 0% 40%;

    --accent: 271 91% 55%;
    --accent-foreground: 0 0% 100%;

    --destructive: 0 84% 60%;
    --destructive-foreground: 0 0% 100%;

    --border: 0 0% 85%;
    --input: 0 0% 85%;
    --ring: 271 91% 55%;

    --radius: 0.75rem;
  }

  .dark {
    --background: 217 33% 17%;
    --foreground: 0 0% 95%;

    --card: 217 33% 22%;
    --card-foreground: 0 0% 95%;

    --popover: 217 33% 22%;
    --popover-foreground: 0 0% 95%;

    --secondary: 217 33% 30%;
    --secondary-foreground: 0 0% 90%;

    --muted: 217 33% 27%;
    --muted-foreground: 0 0% 60%;

    --border: 217 33% 28%;
    --input: 217 33% 28%;
  }

  .dark {
    --background: 230 25% 7%;
    --foreground: 220 20% 95%;
    --card: 230 20% 12%;
    --card-foreground: 220 20% 95%;
    --popover: 230 20% 12%;
    --popover-foreground: 220 20% 95%;
    --primary: 238 80% 64%;
    --primary-foreground: 0 0% 100%;
    --secondary: 230 20% 18%;
    --secondary-foreground: 220 20% 90%;
    --muted: 230 15% 16%;
    --muted-foreground: 220 10% 55%;
    --accent: 330 80% 60%;
    --accent-foreground: 0 0% 100%;
    --destructive: 0 72% 51%;
    --destructive-foreground: 0 0% 100%;
    --border: 230 15% 20%;
    --input: 230 15% 20%;
    --ring: 238 80% 64%;
    --sidebar-background: 230 20% 10%;
    --sidebar-foreground: 220 20% 90%;
    --sidebar-primary: 238 80% 64%;
    --sidebar-primary-foreground: 0 0% 100%;
    --sidebar-accent: 230 15% 16%;
    --sidebar-accent-foreground: 220 20% 90%;
    --sidebar-border: 230 15% 20%;
    --sidebar-ring: 238 80% 64%;
  }
}

/* ============================================
   NEUROMORPHIC COMPONENTS
   ============================================ */

@layer components {
  /* Neuromorphic Surfaces */
  .neu-raised {
    background: linear-gradient(145deg, var(--neu-bg-primary), var(--neu-bg-secondary));
    box-shadow:
      8px 8px 16px var(--neu-shadow-dark),
      -8px -8px 16px var(--neu-shadow-light);
    transition: transform var(--transition-fast), box-shadow var(--transition-fast);
  }

  .neu-raised:hover {
    box-shadow:
      8px 8px 16px var(--neu-shadow-dark),
      -8px -8px 16px var(--neu-shadow-light);
    transform: translateY(-2px);
  }

  /* Fixed raised surface (no hover effect) - for navbar */
  .neu-raised-fixed {
    background: linear-gradient(145deg, var(--neu-bg-primary), var(--neu-bg-secondary));
    box-shadow:
      8px 8px 16px var(--neu-shadow-dark),
      -8px -8px 16px var(--neu-shadow-light);
  }

  .neu-raised-sm {
    box-shadow:
      4px 4px 8px var(--neu-shadow-dark),
      -4px -4px 8px var(--neu-shadow-light);
    transition: transform var(--transition-fast), box-shadow var(--transition-fast);
  }

  .neu-raised-sm:hover {
    box-shadow:
      4px 4px 8px var(--neu-shadow-dark),
      -4px -4px 8px var(--neu-shadow-light);
    transform: translateY(-2px);
  }

  .neu-inset {
    background: linear-gradient(145deg, var(--neu-bg-secondary), var(--neu-bg-primary));
    box-shadow:
      inset 4px 4px 8px var(--neu-shadow-dark),
      inset -4px -4px 8px var(--neu-shadow-light);
  }

  .neu-inset:focus,
  .neu-inset:focus-visible {
    box-shadow:
      inset 4px 4px 8px var(--neu-shadow-dark),
      inset -4px -4px 8px var(--neu-shadow-light),
      0 0 0 3px var(--neu-primary);
  }

  .neu-flat {
    background: linear-gradient(145deg, var(--neu-bg-primary), var(--neu-bg-secondary));
    box-shadow: none;
  }

  /* Button States */
  .neu-btn {
    transition: transform var(--transition-fast), box-shadow var(--transition-fast);
  }

  .neu-btn:hover:not(:disabled) {
    transform: translateY(-2px);
  }

  .neu-btn:active:not(:disabled) {
    transform: translateY(1px);
    box-shadow:
      inset 2px 2px 4px var(--neu-shadow-dark),
      inset -2px -2px 4px var(--neu-shadow-light);
  }

  .neu-btn:disabled {
    opacity: 0.6;
    cursor: not-allowed;
  }

  /* Focus Styles */
  .neu-focus:focus {
    outline: none;
  }

  .neu-focus:focus-visible {
    outline: 3px solid var(--neu-primary);
    outline-offset: 2px;
  }

  /* Card Styling */
  .neu-card {
    @apply rounded-3xl p-6 neu-raised;
  }

  /* Input Fields */
  .neu-input {
    @apply px-4 py-3 rounded-xl text-sm neu-inset bg-transparent focus:outline-none focus:ring-2 focus:ring-offset-0 transition-all;
  }

  /* Shimmer Animation */
  @keyframes shimmer {
    from {
      transform: translateX(-100%);
    }
    to {
      transform: translateX(100%);
    }
  }

  .shimmer {
    position: relative;
    overflow: hidden;
  }

  .shimmer::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(90deg,
        transparent,
        rgba(255, 255, 255, 0.4),
        transparent);
    animation: shimmer 1.5s infinite;
  }

  /* Skeleton Loading */
  @keyframes skeleton {
    from {
      background-position: 200% 0;
    }
    to {
      background-position: -200% 0;
    }
  }

  .skeleton {
    background: linear-gradient(90deg,
        var(--neu-bg-secondary) 25%,
        var(--neu-bg-primary) 50%,
        var(--neu-bg-secondary) 75%);
    background-size: 200% 100%;
    animation: skeleton 1.5s infinite;
  }

  /* Progress Bar */
  .progress-fill {
    background: linear-gradient(90deg, #7c3aed, #a855f7);
    transition: width 0.3s ease;
  }

  /* Custom Scrollbar */
  .custom-scrollbar::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }

  .custom-scrollbar::-webkit-scrollbar-track {
    background: var(--neu-bg-secondary);
    border-radius: 4px;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb {
    background: linear-gradient(145deg, var(--neu-shadow-dark), #9ca0a6);
    border-radius: 4px;
  }

  /* Enhanced Navbar Shadow */
  nav[class*="neu-raised-fixed"] {
    box-shadow:
      0 4px 6px rgba(184, 188, 194, 0.15),
      0 8px 12px rgba(184, 188, 194, 0.1),
      0 12px 24px rgba(184, 188, 194, 0.08),
      inset 0 1px 0 rgba(255, 255, 255, 0.5);
  }

  .dark nav[class*="neu-raised-fixed"] {
    box-shadow:
      0 4px 6px rgba(0, 0, 0, 0.3),
      0 8px 12px rgba(0, 0, 0, 0.25),
      0 12px 24px rgba(0, 0, 0, 0.2),
      inset 0 1px 0 rgba(75, 85, 99, 0.4);
  }

  /* Dark theme glass morphism navbar */
  .dark nav.navbar-glass {
    background: rgba(0, 0, 0, 0.3) !important;
    backdrop-filter: blur(16px) !important;
    -webkit-backdrop-filter: blur(16px) !important;
    border: 1px solid rgba(255, 255, 255, 0.15) !important;
    box-shadow: 
      0 4px 12px rgba(0, 0, 0, 0.2),
      0 8px 24px rgba(0, 0, 0, 0.15),
      inset 0 1px 0 rgba(255, 255, 255, 0.2) !important;
  }
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-gradient-to-br from-background via-background to-secondary/20 text-foreground;
    font-family: 'Inter', sans-serif;
    transition: background 0.5s ease;
  }
}

@layer utilities {
  .no-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  .no-scrollbar::-webkit-scrollbar {
    display: none;
  }

  .glass {
    @apply bg-card/60 backdrop-blur-xl border border-border/50;
  }

  .gradient-text {
    @apply bg-clip-text text-transparent bg-gradient-to-r from-purple-600 to-purple-400;
  }

  /* Upload Zone */
  .upload-zone {
    @apply border-2 border-dashed rounded-2xl transition-all duration-300 cursor-pointer hover:border-primary/60;
  }

  .upload-zone.dragging {
    @apply border-primary bg-primary/5;
  }

  /* Crop area styling */
  .crop-area-with-handles {
    border: 2px solid hsl(271 91% 55%) !important;
    color: transparent !important;
  }

  /* Toast Animations */
  @keyframes toast-in {
    from {
      transform: translateX(100%);
      opacity: 0;
    }
    to {
      transform: translateX(0);
      opacity: 1;
    }
  }

  @keyframes toast-out {
    from {
      transform: translateX(0);
      opacity: 1;
    }
    to {
      transform: translateX(100%);
      opacity: 0;
    }
  }

  .toast-enter {
    animation: toast-in 0.3s ease-out forwards;
  }

  .toast-exit {
    animation: toast-out 0.3s ease-in forwards;
  }

  /* Reduced Motion */
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }

  /* Tooltip Styling */
  .tooltip-container:hover .tooltip,
  .tooltip-container:focus-within .tooltip {
    opacity: 1;
    visibility: visible;
    transform: translateX(-50%) translateY(0);
  }

  .tooltip {
    opacity: 0;
    visibility: hidden;
    transform: translateX(-50%) translateY(4px);
    transition: all var(--transition-fast);
  }

  /* Data attribute tooltip */
  [data-tooltip]:hover::before,
  [data-tooltip]:focus-within::before,
  [data-tooltip]:hover::after,
  [data-tooltip]:focus-within::after {
    opacity: 1;
    visibility: visible;
    transform: translateX(-50%) translateY(0);
  }

  [data-tooltip]::before {
    content: attr(data-tooltip);
    position: absolute;
    bottom: 100%;
    left: 50%;
    background-color: #374151;
    color: #ffffff;
    padding: 6px 10px;
    border-radius: 6px;
    font-size: 12px;
    font-weight: 500;
    white-space: nowrap;
    opacity: 0;
    visibility: hidden;
    transform: translateX(-50%) translateY(0px);
    transition: all var(--transition-fast);
    pointer-events: none;
    z-index: 1000;
    box-shadow:
      8px 8px 16px var(--neu-shadow-dark),
      -8px -8px 16px var(--neu-shadow-light);
    margin-bottom: 2px;
  }

  [data-tooltip]::after {
    content: '';
    position: absolute;
    bottom: 100%;
    left: 50%;
    margin-left: -4px;
    border-width: 4px;
    border-style: solid;
    border-color: #374151 transparent transparent transparent;
    opacity: 0;
    visibility: hidden;
    transition: all var(--transition-fast);
    pointer-events: none;
    z-index: 1000;
    margin-bottom: 0px;
  }

  /* Dark mode tooltip - light background */
  .dark [data-tooltip]::before {
    background-color: #e6e9ef;
    color: #1f2937;
    box-shadow:
      8px 8px 16px rgba(17, 24, 39, 0.3),
      -8px -8px 16px rgba(75, 85, 99, 0.3);
  }

  .dark [data-tooltip]::after {
    border-color: #e6e9ef transparent transparent transparent;
  }

  /* 8-point handles on crop area */
  .crop-area-with-handles::before {
    content: '';
    position: absolute;
    inset: -7px;
    pointer-events: none;
    z-index: 1;
    background:
      /* Corners */
      radial-gradient(circle 6px at 0% 0%, hsl(238 80% 64%) 4px, white 4px, white 6px, transparent 6px),
      radial-gradient(circle 6px at 100% 0%, hsl(238 80% 64%) 4px, white 4px, white 6px, transparent 6px),
      radial-gradient(circle 6px at 0% 100%, hsl(238 80% 64%) 4px, white 4px, white 6px, transparent 6px),
      radial-gradient(circle 6px at 100% 100%, hsl(238 80% 64%) 4px, white 4px, white 6px, transparent 6px),
      /* Edge midpoints */
      radial-gradient(circle 5px at 50% 0%, hsl(238 80% 64%) 3px, white 3px, white 5px, transparent 5px),
      radial-gradient(circle 5px at 50% 100%, hsl(238 80% 64%) 3px, white 3px, white 5px, transparent 5px),
      radial-gradient(circle 5px at 0% 50%, hsl(238 80% 64%) 3px, white 3px, white 5px, transparent 5px),
      radial-gradient(circle 5px at 100% 50%, hsl(238 80% 64%) 3px, white 3px, white 5px, transparent 5px);
    background-repeat: no-repeat;
  }

  /* Grid lines for free crop */
  .crop-area-with-handles::after {
    content: '';
    position: absolute;
    inset: 0;
    pointer-events: none;
    background:
      linear-gradient(to right, rgba(255,255,255,0.2) 1px, transparent 1px),
      linear-gradient(to bottom, rgba(255,255,255,0.2) 1px, transparent 1px);
    background-size: 33.33% 33.33%;
    background-position: center;
  }
}

/* Hide tooltips on mobile devices */
@media (max-width: 768px) {
  /* Hide data attribute tooltips */
  [data-tooltip]::before,
  [data-tooltip]::after {
    display: none !important;
  }

  /* Hide tooltip container tooltips */
  .tooltip-container:hover .tooltip,
  .tooltip-container:focus-within .tooltip {
    display: none !important;
  }

  .tooltip {
    display: none !important;
  }

  /* Alternative: Make them non-interactive on mobile */
  /* Uncomment if you want tooltips visible but not interactive */
  /*
  [data-tooltip]::before,
  [data-tooltip]::after {
    opacity: 0 !important;
    visibility: hidden !important;
    pointer-events: none !important;
  }
  */
}

/* For smaller screens (phones) */
@media (max-width: 480px) {
  [data-tooltip]::before,
  [data-tooltip]::after {
    display: none !important;
  }
}